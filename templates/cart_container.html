{% load static %}
{% load custom_tags %}



<div class="small-container cart-page">
    <table>
        <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Subtotal</th>
        </tr>

        <!-- Loop through items in cart -->
        {% for item in items %}
<tr>
    <td>
        <div class="cart-info">
            <img src="{{ item.product.image.url }}" alt="{{ item.product.title }}">
            <div>
                <p>{{ item.product.title }}</p>
                <small>${{ item.product.price }}</small>
                <br>
                <form action="{% url 'remove_from_cart' item.id %}" method="POST" style="display:inline;">
    {% csrf_token %}
    <button type="submit" class="remove-item">Remove</button>
</form>


            </div>
        </div>
    </td>
    <td><input type="number" disabled value="{{ item.quantity }}"></td>
    <td>${{ item.product.price|multiply:item.quantity }}</td>



</tr>
{% empty %}
<tr>
    <td colspan="3">Your cart is empty.</td>
</tr>
{% endfor %}

    </table>

    <!-- Cart Total Section -->
    <div class="total-price">
        <table>
            <tr>
                <td>Subtotal</td>
                <td>${{ items|sum_cart }}</td>

            </tr>
           
        </table>
    </div>
    <form action="{% url 'checkout' %}" enctype="multipart/form-data"  method="POST">
        {% csrf_token %}
        <input type="hidden" name="total" value="{{ items|sum_cart }}">

        

        <button type="submit" class="btn" >Checkout</button>
    </div>
</div>
